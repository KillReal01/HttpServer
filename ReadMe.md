# WebServer

Этот проект представляет собой HTTP-сервер, использующий библиотеку Mongoose для обработки запросов. Сервер работает на порту 1616 и поддерживает несколько команд, включая отображение логов и информацию о статусе сервера.

## Логика программы

1. **Обработка URI**:
   - `/info`: Сервер возвращает строку "Everything is OK".
   - `/log`: Сервер выводит список всех URI, к которым был выполнен доступ (с помощью логирования).
   - Для любых других запросов сервер возвращает ошибку 404.

2. **Логирование запросов**:
   - Все запросы на сервер записываются в глобальный вектор `logs`.
   - Для работы с логами используется мьютекс, чтобы избежать гонки потоков.

## Способ сборки

Проект поддерживает несколько архитектур (arm32, arm64, x86). Для сборки используйте скрипт `build.sh`, который автоматически определяет архитектуру и настраивает кросс-компиляцию.

1. **Запуск скрипта сборки**:
   Для сборки под нужную архитектуру используйте параметр `TARGET_ARCH`:
   - Для arm32:
     ```bash
     ./build.sh arm32
     ```
   - Для arm64:
     ```bash
     ./build.sh arm64
     ```
   - Для x86:
     ```bash
     ./build.sh x86
     ```

2. **Проверка наличия компилятора**:
   Скрипт проверяет, установлен ли кросс-компилятор для выбранной архитектуры. Если компилятор не найден, сборка не начнется.

3. **Создание сборочной директории**:
   Если указанная директория для сборки не существует, скрипт создаст её.

4. **Конфигурация с CMake**:
   После настройки скрипт запускает `cmake` для конфигурации проекта с нужным кросс-компилятором.

5. **Сборка**:
   Скрипт использует `make` для сборки проекта, используя все доступные процессоры для ускорения сборки.

6. **Ошибки сборки**:
   Если во время сборки произошла ошибка, скрипт выведет её и прекратит выполнение.

## Развертывание через Docker

Для удобного развертывания через Docker используются Dockerfile, расположенные в соответствующих подкаталогах.

### Docker файлы

- **Для архитектуры arm32**:
  - **Расположение Dockerfile:** `docker/arm32/Dockerfile`
  - **Расположение скрипта для запуска Docker контейнера:** `docker/arm32/docker_run.sh`

- **Для архитектуры arm64**:
  - **Расположение Dockerfile:** `docker/arm64/Dockerfile`
  - **Расположение скрипта для запуска Docker контейнера:** `docker/arm64/docker_run.sh`

---

## Требования

- Для кросс-компиляции под arm32 и arm64 необходимо наличие кросс-компилятора, такого как `arm-linux-gnueabihf-g++` и `aarch64-linux-gnu-g++`.
- Для x86 требуется наличие стандартного компилятора `g++`.